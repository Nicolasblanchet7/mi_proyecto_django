{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>{{ sneaker.name }}</title>
    <link rel="stylesheet" href="{% static 'custom_shoes/css/estilos.css' %}">
</head>
<body>
    <header>
        <img src="{% static 'custom_shoes/img/logo.png' %}" alt="Logo de la tienda" class="logo">
        <h1>{{ sneaker.name }}</h1>
    </header>

    <main class="product-page">
        <div class="product-detail-card">
            <h2>{{ sneaker.name }}</h2>
            {% if sneaker.image %}
                <img src="{{ sneaker.image.url }}" alt="{{ sneaker.name }}" width="300" height="auto">
            {% endif %}
            <p>{{ sneaker.description }}</p>
            <h3>Selecciona tus opciones:</h3>
            <form action="{% url 'agregar_al_carrito' sneaker_name=sneaker.name %}" method="post">
                {% csrf_token %}
                <label for="color">Color:</label>
                <select id="color" name="color">
                    <option value="negro">Negro</option>
                    <option value="blanco">Blanco</option>
                    <option value="rojo">Rojo</option>
                </select>

                <br><br>

                <label for="talla">Talla:</label>
                <select id="talla" name="talla">
                    <option value="38">38</option>
                    <option value="39">39</option>
                    <option value="40">40</option>
                    <option value="41">41</option>
                    <option value="42">42</option>
                    <option value="43">43</option>
                    <option value="44">44</option>
                    <option value="45">45</option>
                    <option value="46">46</option>
                </select>

                <br><br>

                <button type="submit" class="btn">Confirmar Selección</button>
            </form>
        </div>

        <div class="comments-section">
            <h3>Comentarios y Reseñas</h3>

            <div class="comment-form-container">
                {% if user.is_authenticated %}
                    <form method="post">
                        {% csrf_token %}
                        {{ comment_form.as_p }}
                        <button type="submit" class="btn">Enviar Comentario</button>
                    </form>
                {% else %}
                    <p>Debes <a href="{% url 'login' %}">iniciar sesión</a> para dejar un comentario.</p>
                {% endif %}
            </div>

            <div class="comment-list-container">
                {% for comment in comments %}
                    <div class="comment-item">
                        <p class="comment-user">
                            <strong>{{ comment.user.username }}</strong>
                            <span class="comment-date">{{ comment.created_at|date:"d M Y" }}</span>
                        </p>
                        <p class="comment-text">{{ comment.text }}</p>
                    </div>
                {% empty %}
                    <p>Sé el primero en dejar un comentario.</p>
                {% endfor %}
            </div>
        </div>
        </main>

    <footer>
        <p>Todos los derechos reservados. MiProyectoDjango 2025</p>
        <p><a href="/">Volver al catálogo</a></p>
    </footer>
</body>
</html>